/* =============================================================================
   DISPATCH: Combat UI Module - Styles
   =============================================================================
   Turn cards HUD, Call sheets, and combat UI styles for Masks: A New Generation
   ============================================================================= */

/* Import Call Sheet styles */
@import "./call-sheet.scss";

/* =============================================================================
   THEME VARIABLES - Shared with masks module, defined here for standalone use
   ============================================================================= */

:root {
  /* --- Core Color Palette (matches masks module) --- */
  --masks-blue-dark: #0e2949;
  --masks-blue-primary: #173f6e;
  --masks-blue-medium: #1e528f;
  --masks-blue-light: #3da7db;
  --masks-blue-accent: #58a4fc;

  --masks-gold: #ffeb98;
  --masks-gold-dark: #e7a345;

  /* --- Label Colors (Masks RPG stats) --- */
  --masks-danger-color: #e05252;
  --masks-freak-color: #9b59b6;
  --masks-savior-color: #3498db;
  --masks-superior-color: #f39c12;
  --masks-mundane-color: #27ae60;
  --masks-soldier-color: #8b4513;
  --masks-nomad-color: #0d9488;

  /* Semi-transparent versions for backgrounds */
  --masks-danger-bg: rgba(224, 82, 82, 0.15);
  --masks-freak-bg: rgba(155, 89, 182, 0.15);
  --masks-savior-bg: rgba(52, 152, 219, 0.15);
  --masks-superior-bg: rgba(243, 156, 18, 0.15);
  --masks-mundane-bg: rgba(39, 174, 96, 0.15);
  --masks-soldier-bg: rgba(139, 69, 19, 0.15);
  --masks-nomad-bg: rgba(13, 148, 136, 0.15);

  /* --- Semantic Colors --- */
  --masks-text-primary: #ffffff;
  --masks-text-secondary: rgba(255, 255, 255, 0.75);
  --masks-text-muted: rgba(255, 255, 255, 0.5);
  --masks-text-dark: #000000;

  --masks-bg-panel: rgba(20, 30, 45, 0.95);
  --masks-bg-sidebar: rgba(30, 40, 55, 0.92);
  --masks-bg-tab: rgba(40, 50, 65, 0.9);
  --masks-bg-tab-active: rgba(60, 75, 95, 0.95);
  --masks-bg-input: rgba(0, 0, 0, 0.3);
  --masks-bg-input-light: rgba(255, 255, 255, 0.75);

  --masks-border-color: rgba(255, 255, 255, 0.15);
  --masks-border-accent: rgba(61, 167, 219, 0.5);

  /* --- Interactive Elements --- */
  --masks-interactive-bg: #1e528f;
  --masks-interactive-hover: #173f6e;
  --masks-accent: #3da7db;

  /* --- Sheet Background --- */
  --masks-gradient: linear-gradient(to bottom, #58a4fc 0%, #b0c2b8 80%, #fff1b6 100%);
  --masks-window-bg: url("/modules/masks-newgeneration-unofficial/images/skyline.webp"), var(--masks-gradient);

  /* --- Layout Constants --- */
  --masks-corner-radius: 2px;
  --masks-transition-fast: 150ms ease;
  --masks-transition-smooth: 300ms ease;

  /* --- Turn Cards Theme (uses blue scheme) --- */
  --tc-border-outer: var(--masks-blue-dark);
  --tc-border-inner: var(--masks-blue-primary);
  --tc-frame-bg: var(--masks-bg-panel);
  --tc-nameplate-bg: var(--masks-blue-primary);
  --tc-hover-inner: var(--masks-blue-medium);
  --tc-action-bg: var(--masks-mundane-color);
  --tc-cooldown-bar: var(--masks-blue-light);
  --tc-cooldown-label-bg: rgba(0, 0, 0, 0.72);
  --tc-downed-bg: rgba(104, 59, 71, 0.92);
  --tc-potential-fill: var(--masks-gold-dark);
  --tc-forward-bg: var(--masks-blue-light);
  --tc-pentagon-color: var(--masks-blue-dark);
  --tc-cooldown-opacity: 0.75;
  --tc-downed-opacity: 0.45;
  --tc-notch: rgba(0, 0, 0, 0.12);
}

/* Hide default hotbar and combat tracker initiative tokens */
.token-initiative { display: none !important; }
#hotbar { display: none; }

/* =============================================================================
   TURN CARDS HUD - Blue Theme (matches character sheet)
   ============================================================================= */

#dispatch-turncards {
  /* Layout */
  --tc-max-cols: 8;
  --tc-gap: 8px;
  --tc-card-width: clamp(104px, 7.8vw, 130px);
  --tc-card-aspect: 3 / 4;
  --tc-control-size: 28px;
  --tc-forward-size: 24px;
  --tc-nameplate-height: 32px;
  --tc-status-bar-height: 26px;
  --tc-portrait-pad: 3px;

  /* Motion */
  --tc-transition-fast: 150ms ease-out;
  --tc-transition-smooth: 400ms cubic-bezier(0.4, 0, 0.2, 1);
  --tc-transition-bar: 800ms cubic-bezier(0.25, 0.1, 0.25, 1);

  width: 100%;
  pointer-events: none;
  z-index: 101;
  padding: 0;

  .turncards-row {
    pointer-events: none;
    display: flex;
    flex-wrap: wrap-reverse;
    gap: var(--tc-gap);
    justify-content: center;
    align-items: flex-end;
    width: 100%;
    max-width: calc((var(--tc-card-width) + var(--tc-gap)) * 8 - var(--tc-gap));
    margin: 0 auto;
    padding: 8px 12px;
  }

  .turncard {
    pointer-events: auto;
    box-sizing: border-box;
    flex: 0 0 var(--tc-card-width);
    width: var(--tc-card-width);
    aspect-ratio: var(--tc-card-aspect);
    position: relative;
    border-radius: 1px;
    background: var(--tc-frame-bg);
    border: 2px solid var(--tc-border-outer);
    box-shadow: 0 0 0 2px var(--tc-border-inner) inset, 0 2px 10px rgba(0, 0, 0, 0.35);
    overflow: hidden;
    cursor: pointer;
    transition: transform var(--tc-transition-fast), box-shadow var(--tc-transition-fast), filter var(--tc-transition-fast);

    &:hover {
      transform: translateY(-4px) scale(1.03);
      box-shadow: 0 0 0 2px var(--tc-hover-inner) inset, 0 10px 26px rgba(0, 0, 0, 0.45);
    }

    &:focus-visible {
      outline: 2px solid var(--color-focus-primary, #7a99ff);
      outline-offset: 2px;
    }

    &.turncard--team {
      cursor: default;
      &:hover {
        transform: none;
        box-shadow: 0 0 0 2px var(--tc-border-inner) inset, 0 2px 10px rgba(0, 0, 0, 0.35);
      }
    }

    &.is-cooldown .turncard__content { opacity: var(--tc-cooldown-opacity); }
    &.is-downed .turncard__content { opacity: var(--tc-downed-opacity); }
    &.is-downed .turncard__portrait img { filter: grayscale(1); }
  }

  .turncard__content {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    transition: opacity var(--tc-transition-smooth);
  }

  .turncard__portrait {
    position: relative;
    flex: 1 1 auto;
    background: var(--tc-frame-bg);
    overflow: hidden;

    img {
      box-sizing: border-box;
      margin: 0;
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: top center;
      transition: filter var(--tc-transition-smooth);
    }
  }

  .turncard__portrait--team {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2px;
    background: linear-gradient(180deg, var(--masks-blue-medium) 0%, var(--masks-blue-dark) 100%);
  }

  /* --- Status Bar --- */
  .turncard__status-bar {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: var(--tc-status-bar-height);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    z-index: 3;
  }

  .turncard__status-bar--cooldown { background: var(--tc-cooldown-label-bg); }
  .turncard__status-bar--downed { background: var(--tc-downed-bg); }
  .turncard__status-bar--ready { background: transparent; }

  .turncard__cooldown-bar {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    width: calc(var(--cooldown-frac, 0) * 100%);
    background: var(--tc-cooldown-bar);
    opacity: 0.7;
    transition: width var(--tc-transition-bar);
    z-index: 1;
  }

  .turncard__status-bar--downed .turncard__cooldown-bar { opacity: 0.7; }

  .turncard__status-label {
    position: relative;
    z-index: 2;
    font-size: 0.65rem;
    font-weight: 900;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.92);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.55);
    white-space: nowrap;
  }

  .turncard__status-bar--ready .turncard__status-label { opacity: 0; }

  /* --- Action Overlay --- */
  .turncard__action {
    box-sizing: border-box;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: var(--tc-status-bar-height);
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--tc-action-bg);
    border: none;
    border-radius: 0;
    width: auto;
    padding: 0 8px;
    cursor: pointer;
    opacity: 0;
    pointer-events: none;
    transform: translateY(-4px);
    z-index: 4;
    transition: opacity var(--tc-transition-fast), transform var(--tc-transition-fast), filter var(--tc-transition-fast);

    &:hover:not(:disabled) { filter: brightness(1.05); }
    &:disabled {
      filter: grayscale(0.6) brightness(0.8);
      cursor: not-allowed;
    }

    .turncard__action-label {
      font-size: 0.7rem;
      font-weight: 900;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.95);
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
    }
  }

  .turncard:hover .turncard__action,
  .turncard:focus-within .turncard__action {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
  }

  /* --- Nameplate --- */
  .turncard__nameplate {
    box-sizing: border-box;
    position: relative;
    flex: 0 0 auto;
    height: var(--tc-nameplate-height);
    padding: 4px 6px;
    background: var(--tc-nameplate-bg);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;

    &::after {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 0;
      background: linear-gradient(135deg, transparent 75% 55%, var(--tc-notch) 55% 100%);
      pointer-events: none;
    }
  }

  .turncard__name {
    position: relative;
    z-index: 1;
    text-transform: uppercase;
    font-weight: 900;
    font-size: 1rem;
    letter-spacing: 0.03em;
    color: var(--masks-text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
  }

  /* --- Corner Controls --- */
  .turncard__shift,
  .turncard__forward,
  .turncard__potential {
    box-sizing: border-box;
    position: absolute;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 5;
    transition: transform var(--tc-transition-fast), filter var(--tc-transition-fast), opacity var(--tc-transition-fast);
    border-radius: 50%;

    &:hover:not(:disabled) {
      transform: scale(1.15);
      filter: brightness(1.12);
    }

    &:active:not(:disabled) { transform: scale(0.95); }

    &.is-disabled, &:disabled {
      opacity: 1;
      cursor: default;
      &:hover { transform: none; filter: none; }
    }
  }

  .turncard__shift {
    width: var(--tc-control-size);
    height: var(--tc-control-size);
    min-width: var(--tc-control-size);
    min-height: var(--tc-control-size);
    aspect-ratio: 1 / 1;
    flex: 0 0 auto;
    background: rgba(0, 0, 0, 0.55);
    border: 1px solid rgba(255, 255, 255, 0.85);
  }

  .turncard__labels-graph {
    --labels-size: 40px;
    border-radius: 0;
    clip-path: polygon(50% 0%, 100% 38%, 81% 100%, 19% 100%, 0% 38%);
    left: 2px;
    bottom: 2px;
    width: var(--labels-size);
    height: var(--labels-size);
    min-width: var(--labels-size);
    min-height: var(--labels-size);
    max-width: var(--labels-size);
    max-height: var(--labels-size);
    aspect-ratio: 1 / 1;
    flex: 0 0 auto;
    z-index: 6;
    background: transparent;
    border: none;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;

    .labels-graph-svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    &:hover:not(:disabled) {
      transform: scale(1.2);
      filter: brightness(1.15);
    }

    &:active:not(:disabled) { transform: scale(1.05); }

    &.is-disabled, &:disabled {
      opacity: 1;
      cursor: default;
      &:hover { transform: none; filter: none; }
    }
  }

  .turncard__forward {
    width: var(--tc-forward-size);
    height: var(--tc-forward-size);
    min-width: var(--tc-forward-size);
    min-height: var(--tc-forward-size);
    aspect-ratio: 1 / 1;
    flex: 0 0 auto;
    font-size: 0.75rem;
    background: rgba(0, 0, 0, 0.35);
    border: 1px solid transparent;
    color: #fff;

    .turncard__forward-value {
      font-size: 0.7rem;
      font-weight: 900;
      line-height: 1;
    }

    i { font-size: 0.65rem; line-height: 1; }

    &.has-bonus {
      background: var(--tc-forward-bg);
      box-shadow: 0 2px 6px rgba(59, 130, 246, 0.35);
      border: 1px solid rgba(255, 255, 255, 0.92);
    }

    &.has-negative {
      background: var(--masks-danger-color);
      box-shadow: 0 2px 6px rgba(224, 82, 82, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.92);
    }
  }

  .turncard__potential {
    width: var(--tc-control-size);
    height: var(--tc-control-size);
    min-width: var(--tc-control-size);
    min-height: var(--tc-control-size);
    aspect-ratio: 1 / 1;
    flex: 0 0 auto;
    background: var(--tc-pentagon-color);
    border: 1px solid rgba(255, 255, 255, 0.92);
    overflow: hidden;

    &::before {
      content: "";
      position: absolute;
      inset: auto 0 0 0;
      height: var(--potential-fill, 0%);
      background: var(--tc-potential-fill);
      transition: height var(--tc-transition-smooth);
    }

    i {
      position: relative;
      z-index: 1;
      color: #fff;
      font-size: 0.75rem;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    }

    &.is-bump { animation: tc-bump 200ms ease-out; }
  }

  /* --- Team Card Internals --- */
  .turncard__team {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 6px;
  }

  .turncard__team-label {
    font-size: 0.7rem;
    font-weight: 900;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.85);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
  }

  .turncard__team-value {
    font-size: 2rem;
    font-weight: 900;
    letter-spacing: 0.04em;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.45);
    line-height: 1;
  }

  .turncard__team-controls {
    display: flex;
    gap: 2px;
    flex-wrap: nowrap;
    justify-content: space-evenly;
  }

  .turncard__team-btn {
    box-sizing: border-box;
    width: calc(var(--tc-control-size) - 2px);
    height: calc(var(--tc-control-size) - 2px);
    padding: 0;
    border-radius: 3px;
    border: 2px solid rgba(255, 255, 255, 0.55);
    background: rgba(0, 0, 0, 0.25);
    color: #fff;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background-color var(--tc-transition-fast), transform var(--tc-transition-fast), border-color var(--tc-transition-fast);

    &:hover:not(:disabled) {
      background: rgba(255, 255, 255, 0.18);
      border-color: rgba(255, 255, 255, 0.85);
      transform: scale(1.08);
    }

    &:active:not(:disabled) { transform: scale(0.95); }

    &:disabled {
      opacity: 0.35;
      cursor: not-allowed;
      &:hover {
        background: rgba(0, 0, 0, 0.25);
        transform: none;
        border-color: rgba(255, 255, 255, 0.55);
      }
    }

    i { font-size: 0.75rem; }
  }

  /* --- Control Columns (Flexbox) --- */
  .turncard__controls {
    position: absolute;
    bottom: 0px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    gap: 0;
    z-index: 5;
    pointer-events: none;

    > * {
      pointer-events: auto;
      flex: 0 0 auto; /* Prevent buttons from stretching */
    }
  }

  .turncard__controls--left {
    left: 0;
    .is-action {
      margin-bottom: 2px;
    }
  }

  .turncard__controls--right {
    right: 4px;
    bottom: 4px;
    gap: 6px;
  }

  /* Update existing controls to work in flexbox */
  .turncard__controls .turncard__shift,
  .turncard__controls .turncard__forward,
  .turncard__controls .turncard__potential,
  .turncard__controls .turncard__tracker {
    position: relative;
    left: auto;
    right: auto;
    bottom: auto;
    flex: 0 0 auto; /* Ensure buttons don't stretch */
  }

  /* Shift Labels row - horizontal layout for pentagon + beside trackers */
  .turncard__shift-row {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 2px;
    flex: 0 0 auto;
  }

  /* --- Playbook Resource Trackers --- */
  /* Large colored icons with semi-opaque background */
  .turncard__tracker {
    box-sizing: border-box;
    position: relative;
    width: var(--tc-control-size);
    height: var(--tc-control-size);
    min-width: var(--tc-control-size);
    min-height: var(--tc-control-size);
    max-width: var(--tc-control-size);
    max-height: var(--tc-control-size);
    aspect-ratio: 1 / 1;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.45);
    border: none;
    color: var(--tracker-color, #888);
    font-size: 1.25rem;
    font-weight: 700;
    overflow: visible;
    flex: 0 0 auto;
    transition: transform var(--tc-transition-fast), filter var(--tc-transition-fast), opacity var(--tc-transition-fast), background var(--tc-transition-fast);

    /* The icon - large and colored */
    i {
      font-size: 1.1rem;
      color: var(--tracker-color, #888);
      transition: transform var(--tc-transition-fast), filter var(--tc-transition-fast);
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));
      line-height: 1;
    }

    /* Value badge for numeric/display trackers with counts */
    .turncard__tracker-badge {
      position: absolute;
      bottom: -3px;
      right: -3px;
      min-width: 14px;
      height: 14px;
      padding: 0 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.9);
      border-radius: 7px;
      color: #fff;
      font-size: 0.6rem;
      font-weight: 700;
      text-shadow: none;
      z-index: 10;
      line-height: 1;
    }

    &:hover:not(:disabled) {
      transform: scale(1.15);
      background: rgba(0, 0, 0, 0.6);
      i { filter: brightness(1.25) drop-shadow(0 0 4px var(--tracker-color, #888)); }
    }

    &:active:not(:disabled) { transform: scale(0.92); }

    &.is-display {
      cursor: default;
      opacity: 0.85;
      &:hover { transform: none; background: rgba(0, 0, 0, 0.45); i { filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5)); } }
    }

    &.is-action {
      cursor: pointer;
      &:hover:not(:disabled) {
        transform: scale(1.15);
        i { filter: brightness(1.3) drop-shadow(0 0 6px var(--tracker-color, #888)); }
      }
    }

    &.is-editable {
      cursor: pointer;
    }

    &.is-bump { animation: tc-bump 200ms ease-out; }

    &.is-disabled, &:disabled {
      cursor: default;
      pointer-events: none;
      &:hover { transform: none; background: rgba(0, 0, 0, 0.45); }
    }
  }

  /* Fillable trackers with fill effect (numeric and display with fillable flag) */
  .turncard__tracker--fillable {
    /* NOTE: overflow must be visible so the badge doesn't get clipped */
    overflow: visible;

    /* Filled portion overlays the icon - uses clip-path for fill effect */
    .turncard__tracker-fill {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      clip-path: inset(calc(100% - var(--tracker-fill, 0%)) 0 0 0);
      transition: clip-path var(--tc-transition-smooth);
      background: var(--tracker-color, #888);
      border-radius: 50%;
      pointer-events: none; /* Don't block clicks on the button */

      i {
        font-size: 1.1rem;
        color: #fff;
        filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.5));
      }
    }

    /* Ensure badge stays above the fill */
    .turncard__tracker-badge {
      z-index: 15;
    }
  }

  /* Beside tracker (Soldier - to the right of Shift Labels) */
  .turncard__tracker--beside {
    --beside-size: calc(var(--tc-control-size) - 4px);
    width: var(--beside-size);
    height: var(--beside-size);
    min-width: var(--beside-size);
    min-height: var(--beside-size);
    max-width: var(--beside-size);
    max-height: var(--beside-size);
    aspect-ratio: 1 / 1;
    flex: 0 0 auto;

    i {
      font-size: 0.85rem;
      line-height: 1;
    }
    .turncard__tracker-badge {
      font-size: 0.5rem;
      min-width: 12px;
      height: 12px;
      bottom: -2px;
      right: -2px;
    }
  }

  /* Playbook-specific tracker color themes */
  .turncard__tracker--doom {
    --tracker-color: #9333ea;
    i { filter: drop-shadow(0 0 6px rgba(147, 51, 234, 0.6)); }
  }

  .turncard__tracker--burn {
    --tracker-color: #f97316;
    i { filter: drop-shadow(0 0 8px rgba(249, 115, 22, 0.7)); }
    &:hover i { filter: drop-shadow(0 0 12px rgba(249, 115, 22, 0.9)) brightness(1.2); }
  }

  .turncard__tracker--gadgets {
    --tracker-color: #059669;
    i { filter: drop-shadow(0 0 5px rgba(5, 150, 105, 0.5)); }
  }

  .turncard__tracker--soldier {
    --tracker-color: #1e40af;
    i { filter: drop-shadow(0 0 5px rgba(30, 64, 175, 0.6)); }
  }

  .turncard__tracker--heart {
    --tracker-color: #dc2626;
    i { filter: drop-shadow(0 0 5px rgba(220, 38, 38, 0.6)); }

    /* Filled state when ongoing > 0 (similar to forward button with bonus) */
    &.has-ongoing {
      background: #dc2626;
      border: 1px solid rgba(255, 255, 255, 0.92);
      box-shadow: 0 2px 6px rgba(220, 38, 38, 0.45);

      i {
        color: #fff;
        filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.5));
      }

      .turncard__tracker-badge {
        background: #fff;
        color: #dc2626;
        font-weight: 600;
      }
    }
  }

  .turncard__tracker--obligations,
  .turncard__tracker--legacy {
    --tracker-color: #0891b2;
    i { filter: drop-shadow(0 0 5px rgba(8, 145, 178, 0.6)); }
  }

  .turncard__tracker--steps {
    --tracker-color: #ec4899;
    i { filter: drop-shadow(0 0 5px rgba(236, 72, 153, 0.6)); }
  }

  .turncard__tracker--drives {
    --tracker-color: #22c55e;
    i { filter: drop-shadow(0 0 5px rgba(34, 197, 94, 0.6)); }
  }

  .turncard__tracker--lessons {
    --tracker-color: #8b5cf6;
    i { filter: drop-shadow(0 0 5px rgba(139, 92, 246, 0.6)); }
  }

  .turncard__tracker--audience {
    --tracker-color: #eab308;
    i { filter: drop-shadow(0 0 6px rgba(234, 179, 8, 0.7)); }
  }

  .turncard__tracker--roots {
    --tracker-color: #0d9488;
    i { filter: drop-shadow(0 0 5px rgba(13, 148, 136, 0.6)); }
  }

  .turncard__tracker--dots {
    --tracker-color: #7c3aed;
    i { filter: drop-shadow(0 0 5px rgba(124, 58, 237, 0.6)); }
  }

  .turncard__tracker--respect {
    --tracker-color: #be123c;
    i { filter: drop-shadow(0 0 5px rgba(190, 18, 60, 0.6)); }
  }

  @keyframes tc-bump {
    0% { transform: scale(1); }
    50% { transform: scale(1.25); }
    100% { transform: scale(1); }
  }
}

/* Fallback for browsers without aspect-ratio */
@supports not (aspect-ratio: 1) {
  #dispatch-turncards .turncard {
    height: calc(var(--tc-card-width) * 4 / 3);
  }
}
